"use strict";angular.module("wfm.autofocus",[]).directive("autofocus",["$timeout",function(a){return{restrict:"A",link:function(b,c){a(function(){c[0].focus()})}}}]),function(){function a(){var a=this;a.isSelected=function(){return a.parentVm.isSelectedCard(a)},a.select=function(){a.parentVm.selectCard(a)}}function b(){return'<md-card ng-class="vm.isSelected() ? \'wfm-card-selected material-depth-2\' : \'wfm-card-unselected\' "><div ng-click="vm.select()" tabindex="-1" class="wfm-card-title" transclude-id="header"></div><div class="wfm-card-content" ng-show="vm.isSelected()"><div transclude-id="body"></div></div></md-card>'}function c(){return{controller:"wfmCardCtrl",controllerAs:"vm",bindToController:!0,scope:{},template:b(),transclude:!0,require:["wfmCard","^wfmCardList"],link:function(a,b,c,d,e){var f=d[0];f.id=a.$id;var g=d[1];f.parentVm=g,e(function(a){angular.forEach(a,function(a){if(3!==a.nodeType){var c;"CARD-HEADER"===a.nodeName&&(c='[transclude-id="header"]'),"CARD-BODY"===a.nodeName&&(c='[transclude-id="body"]');var d=angular.element(b[0].querySelector(c));null!=d&&d.length?d.append(a):a.remove()}})})}}}function d(){return'<md-content class="wfm-card-list-container"><md-list class="wfm-card-list"><md-content ng-transclude></md-content></md-list></md-content>'}function e(a,b,c,d){d.allowMultiSelect="multiSelect"in c}angular.module("wfm.cardList",[]),angular.module("wfm.cardList").controller("wfmCardCtrl",a),angular.module("wfm.cardList").directive("wfmCard",c),angular.module("wfm.cardList").controller("wfmCardListCtrl",function(){var a=this;a.selectedCards={},a.selectCard=function(b){var c=void 0===a.selectedCards[b.id];a.allowMultiSelect||(a.selectedCards={}),c?a.selectedCards[b.id]=b:delete a.selectedCards[b.id]},a.isSelectedCard=function(b){return void 0!==a.selectedCards[b.id]}}),angular.module("wfm.cardList").directive("wfmCardList",function(){return{controller:"wfmCardListCtrl",controllerAs:"vm",bindToController:!0,transclude:!0,template:d(),link:e}})}(),function(){angular.module("wfm.culturalDatepicker",["currentUserInfoService"]).controller("CulturalDatepickerCtrl",["$scope","CurrentUserInfo",function(a,b){a.dt=new Date;var c=b.CurrentUserInfo().DateFormatLocale;a.isJalaali="fa-IR"===c,a.isGregorian=!a.isJalaali}]).directive("wfmCulturalDatepicker",function(){return{bindToController:!0,controller:"CulturalDatepickerCtrl",controllerAs:"ctrl",restrict:"E",scope:{dt:"="},templateUrl:"directives/cultural-datepicker/cultural-datepicker.tpl.html"}})}(),function(){function a(a,b){function c(a,b){a.addClass("wfm-date-range-picker-wrap"),b.enabled(a,!1)}function d(c,d,f,g){function h(a){return q.$error&&q.$error[a]}function i(a){return function(b,c){return void 0===b||(!a||null!==b&&a(b.startDate,b.endDate))}}function j(a,b){return a<=b}function k(){q.$viewValue&&(c.startDate=q.$viewValue.startDate,c.endDate=q.$viewValue.endDate)}function l(a){if(a&&c.startDate&&angular.isDate(c.startDate)&&c.endDate&&angular.isDate(c.endDate))return a}function m(){q.$setViewValue({startDate:c.startDate,endDate:c.endDate})}function n(){c.dropDownState&&(c.dropDownState.showAllDatePickers||(c.dropDownState.showStartDatePicker=!1,c.dropDownState.showEndDatePicker=!1))}function o(){c.startDate&&c.endDate&&(c.startDate=moment(c.startDate).toDate(),c.endDate=moment(c.endDate).toDate())}function p(a){var b=a.date,d=a.mode;return q.$invalid?"":"day"!==d||moment(b).isBefore(c.startDate,"day")||moment(b).isAfter(c.endDate,"day")?"":"in-date-range"}var q=g[0];g[1];c.displayPopup=function(){return"popup"===c.templateType},c.displayError=h,e(c),c.dateFormat=a.DATETIME_FORMATS.shortDate,c.datepickerOptions={customClass:p,showWeeks:!0,startingDay:a.DATETIME_FORMATS.FIRSTDAYOFWEEK},c.defaultValidators=[{key:"order",message:f.invalidOrderMessage||"StartDateMustBeEqualToOrEarlierThanEndDate",validate:j},{key:"parse",message:f.invalidEmptyMessage||"StartDateAndEndDateMustBeSet"}],c.validators=c.defaultValidators.concat(c.customValidators&&angular.isArray(c.customValidators)?c.customValidators:[]),angular.forEach(c.validators,function(a){q.$validators[a.key]=i(a.validate)}),q.$parsers.push(l),q.$render=k,c.$watchCollection(function(){return c.startDate&&c.endDate?[b("date")(c.startDate,"yyyy-MM-dd"),b("date")(c.endDate,"yyyy-MM-dd")]:[null,null]},function(a){c.testStopUi||(m(),n(),o())}),c.$watch(function(){return c.dropDownState?c.dropDownState.showStartDatePicker&&c.dropDownState.showEndDatePicker:null},function(a){null!==a&&(c.dropDownState.showAllDatePickers=a)})}function e(a){a.dropDownState={showAllDatePickers:!1,showStartDatePicker:!1,showEndDatePicker:!1},a.onClickShowAllDates=function(){a.dropDownState.showAllDatePickers||(a.dropDownState.showStartDatePicker=a.dropDownState.showEndDatePicker=a.dropDownState.showAllDatePickers=!0)}}return{templateUrl:"directives/date-range-picker/date-range-picker.tpl.html",scope:{templateType:"=?",customValidators:"=?",testStopUi:"@?"},controller:["$element","$animate",c],require:["ngModel","dateRangePicker"],link:d}}angular.module("wfm.daterangepicker",["styleguide.templates"]).directive("dateRangePicker",["$locale","$filter",a])}(),function(){var a;a=angular.module("wfm.modal",[]),a.provider("ngModalDefaults",function(){return{options:{closeButtonHtml:'<div class="head-actions panel-menu"><div tabindex=0 class="context-menu card-context"><i class="mdi mdi-close"></i></div></div>'},$get:function(){return this.options},set:function(a,b){var c,d,e;if("object"==typeof a){e=[];for(c in a)a.hasOwnProperty(c)&&(d=a[c],e.push(this.options[c]=d));return e}return this.options[a]=b,this.options[a]}}}),a.directive("modalDialog",["ngModalDefaults","$sce",function(a,b){return{restrict:"E",scope:{show:"=",dialogTitle:"@",onClose:"&?",infos:"="},replace:!0,transclude:!0,link:function(c,d,e){var f;f=function(){c.closeButtonHtml=b.trustAsHtml(a.closeButtonHtml)},c.hideModal=function(){c.show=!1},c.$watch("show",function(a,b){if(!a&&b&&null!=c.onClose)return c.onClose()}),f()},template:"<div class='click-modal modal-box' ng-show='show'><div class='modalbg' ng-click='hideModal()'></div><div class='dialog material-depth-1' ng-style='dialogStyle'><div ng-click='hideModal()' ng-bind-html='closeButtonHtml'></div><div ng-transclude></div></div></div>"}}])}(),function(){angular.module("wfm.notice",["ngSanitize"])}(),function(){var a=angular.module("wfm.notice");a.directive("wfmNotice",["$timeout","$rootScope",function(a,b){return{restrict:"EA",scope:{notices:"="},link:function(c,d,e){c.notices=c.notices?c.notices:[],c.deleteNotice=function(a){a.destroy()},b.$on("$stateChangeSuccess",function(){c.notices.filter(function(a){return a.destroyOnStateChange}).forEach(function(a){c.deleteNotice(a)})}),c.$watchCollection("notices",function(b){b.forEach(function(b){null!==b.timeToLive&&a(function(){c.deleteNotice(b)},b.timeToLive)})})},template:'<div ng-repeat="notice in notices"><div class="notice-container"><div class="notice-item" ng-class="setType(notice)"><i ng-class="setIcon(notice)"></i><span ng-bind-html="notice.content"></span> <i class="pull-right mdi mdi-close notice-close" ng-click="deleteNotice(notice)"></i></div></div></div><button class="wfm-btn notice-item wfm-btn-default" ng-click="clearAll()" ng-if="notices.length>=3">Dismiss all</button>',controller:["$scope",function(a){a.setType=function(a){return a.type},a.clearAll=function(){a.notices.splice(0,a.notices.length)},a.setIcon=function(a){return a.icon}}]}}])}(),function(){var a=function(){var a=-1;return function(){return++a}}();angular.module("wfm.notice").service("NoticeService",["$rootScope",function(b){var c={};b.wfmNotices=b.wfmNotices?b.wfmNotices:[];var d={success:"notice-success",error:"notice-error",info:"notice-info",warning:"notice-warning"},e={success:"mdi mdi-thumb-up",error:"mdi mdi-alert-octagon",info:"mdi mdi-alert-circle",warning:"mdi mdi-alert"},f=function(c,d,e,f,g){var h=a(),i={id:h,type:c,icon:d,content:e,timeToLive:f,destroyOnStateChange:g,destroy:function(){b.wfmNotices=b.wfmNotices.filter(function(a){return a.id!==h})}};return b.wfmNotices.push(i),{destroy:i.destroy}};return c.warning=function(a,b,c){return f(d.warning,e.warning,a,b,c)},c.error=function(a,b,c){return f(d.error,e.error,a,b,c)},c.info=function(a,b,c){return f(d.info,e.info,a,b,c)},c.success=function(a,b,c){return f(d.success,e.success,a,b,c)},c}])}(),function(){function a(){function a(a){var b=this;b.parseNumberString=function(b,c){var d=a.NUMBER_FORMATS.PATTERNS[0].gSize,e=(""+b).split(a.NUMBER_FORMATS.DECIMAL_SEP),f=e[0],g=e[1]||"";if(e.length>2)return!1;if(c&&g.length>0)return!1;var h=f.replace(/\s+/g,"").split(a.NUMBER_FORMATS.GROUP_SEP).join(" "),i=new RegExp("^[-+]?[0-9]{1,"+d+"}( ?[0-9]{"+d+"})*$");return!!i.test(h)&&(!(g.length>0&&!/^[0-9]+$/.test(g))&&(c?parseInt(h.replace(/\s+/g,"")):parseFloat(h.replace(/\s+/g,"")+"."+g)))}}function b(a,b,c,d){function e(a,b){if(null==b)return!1;var c=i.parseNumberString(b.trim(),!j);return c!==!1}function f(b,c){if(null===b)return!0;if(angular.isDefined(a.min)){var d=parseInt(a.min);if(b<d)return!1}if(angular.isDefined(a.max)){var e=parseInt(a.max);if(b>e)return!1}return!0}function g(){h.$setViewValue(h.$modelValue),h.$render(),h.$setPristine()}var h=d[0],i=d[1],j=angular.isDefined(c.floatNumber);h.$validators.number=e,h.$validators.range=f,h.$parsers.push(function(a){return i.parseNumberString(a.trim(),!j)}),a.$on("numeric-value.reset",g)}return{restrict:"A",require:["ngModel","numericValue"],controller:["$locale",a],scope:{min:"@?",max:"@?"},link:b}}angular.module("wfm.numericValue",[]).directive("numericValue",a)}(),function(){var a=angular.module("wfm.pagination",[]);a.run(["$templateCache",function(a){a.put("wfm-pagination-default.tpl.html",'<div class="pagination" ng-if="vm.paginationOptions.totalPages > 0">\t<ul>\t\t<li class=" pagination-item" ng-class="{disabled: vm.paginationOptions.pageNumber == 1 || vm.paginationOptions.totalPages == 0}"\t\tstyle="padding-top: 4px; padding-bottom: 4px;">\t\t\t<a href="" ng-click="vm.gotoPage(1)">\t\t\t\t<i class="mdi mdi-skip-previous"></i>\t\t\t</a>\t\t</li>\t\t<li class="pagination-item" ng-class="{disabled: vm.paginationOptions.pageNumber == 1 || vm.paginationOptions.totalPages == 0}"\t\tstyle="padding-top: 4px; padding-bottom: 4px;">\t\t\t<a href="" ng-click="vm.gotoPage(vm.paginationOptions.pageNumber - 1)">\t\t\t\t<i class="mdi mdi-chevron-left"></i>\t\t\t</a>\t\t</li>\t\t<li class="pagination-item" ng-repeat="n in vm.getVisiblePageNumbers()"\t\t\tng-class="{active: n == vm.paginationOptions.pageNumber}" ng-click="vm.gotoPage(n)" style="padding-top: 4px; padding-bottom: 4px;">\t\t\t<a href="" ng-bind="n"></a>\t\t</li>\t\t<li class="pagination-item" ng-class="{disabled: vm.paginationOptions.pageNumber == vm.paginationOptions.totalPages || vm.paginationOptions.totalPages == 0}"\t\tstyle="padding-top: 4px; padding-bottom: 4px;">\t\t\t<a href="" ng-click="vm.gotoPage(vm.paginationOptions.pageNumber + 1)">\t\t\t\t<i class="mdi mdi-chevron-right"></i>\t\t\t</a>\t\t</li>\t\t<li class="pagination-item" ng-class="{disabled: vm.paginationOptions.pageNumber == vm.paginationOptions.totalPages || vm.paginationOptions.totalPages == 0}"\t\tstyle="padding-top: 4px; padding-bottom: 4px;">\t\t\t<a href="" ng-click="vm.gotoPage(vm.paginationOptions.totalPages)">\t\t\t\t<i class="mdi mdi-skip-next"></i>\t\t\t</a>\t\t</li>\t</ul></div>')}])}(),function(){function a(a,b,c,d){}var b=function(a){function b(a,b){return a-Math.floor(b/2)>1?a-Math.floor(b/2):1}function c(a,b,c){return a+Math.floor(b/2)>c?c:a+Math.floor(b/2)}var d=this;d.gotoPage=function(a){a<1||a>d.paginationOptions.totalPages||(d.paginationOptions.pageNumber=a,void 0!==d.getDataForPageCallback&&d.getDataForPageCallback(a))},d.getVisiblePageNumbers=function(a,e){var f=5,g=[];a||(a=d.paginationOptions.totalPages),e||(e=a,a=1);var h=a,i=e;if(e-a>=f){var j=d.paginationOptions.pageNumber;j<f-1?(h=1,i=f):e-j<3?(h=e-f+1,i=e):(h=b(j,f),i=c(j,f,e))}for(var k=h;k<=i;k++)g.push(k);return g}},c=function(){return{controller:"WfmPaginationCtrl",controllerAs:"vm",bindToController:!0,templateUrl:"wfm-pagination-default.tpl.html",scope:{paginationOptions:"=?",getDataForPageCallback:"=?"},link:a}};angular.module("wfm.pagination").directive("wfmPagination",c).controller("WfmPaginationCtrl",["$scope",b])}(),function(){function a(a){function b(a,b){function c(){a.disableNextDay||(a.nextDay=!a.nextDay)}function d(a,b){var c=b.getHours(),d=b.getMinutes();a.set("hour",c).set("minute",d)}function e(a,b){return a.toLocaleDateString()===b.toLocaleDateString()}var f=this;b.addClass("wfm-time-range-picker-wrap"),a.toggleNextDay=c,f.mutateMoment=d,f.sameDate=e}function c(b,c,d,e){function f(a){if(a){var b=!n.sameDate(a.startTime,a.endTime),c=j(a.startTime,a.endTime,b);return c}}function g(a){if(a)return{startTime:a.startTime.toDate(),endTime:a.endTime.toDate()}}function h(){if(m.$viewValue){var a=m.$viewValue.startTime,c=m.$viewValue.endTime;b.startTime=a.toDate(),b.endTime=c.toDate(),b.nextDay=!a.isSame(c,"day")}}function i(a,b){return void 0===a||a.startTime<=a.endTime}function j(a,b,c){var d={startTime:moment(),endTime:moment()};return n.mutateMoment(d.startTime,a),n.mutateMoment(d.endTime,b),c&&d.endTime.add(1,"day"),d}function k(a,c){return b.startTime&&b.endTime?(b.disableNextDay&&(b.nextDay="00:00"===a.strEndTime),void m.$setViewValue(j(b.startTime,b.endTime,b.nextDay))):void m.$setViewValue(null)}function l(){return{strStartTime:b.startTime?a("date")(b.startTime,"HH:mm"):"",strEndTime:b.endTime?a("date")(b.endTime,"HH:mm"):"",boolNextDay:b.nextDay}}var m=e[0],n=e[1];b.$watch(l,k,!0),m.$parsers.push(g),m.$formatters.push(f),m.$render=h,m.$validators.order=i}return{templateUrl:function(a,b){return b.templateUrl||d},scope:{disableNextDay:"=?"},controller:["$scope","$element",b],require:["ngModel","timeRangePicker"],transclude:!0,link:c}}function b(a){function b(a,b){var c=b.ngModel;a.addClass("wfm-timepicker-wrap");var d=a.find("timepicker");d.attr("ng-model",c),d.attr("show-meridian","showMeridian"),d.attr("minute-step","minuteStep"),e.showMeridian&&d.attr("meridians","meridians")}function d(a){a.showMeridian=e.showMeridian,a.minuteStep=5,e.showMeridian&&(a.meridians=[e.am,e.pm])}var e=c(a);return{template:"<div uib-timepicker></div>",controller:["$scope",d],compile:b}}function c(a){var b=a.DATETIME_FORMATS.shortTime,c={};return/h:/.test(b)?(c.showMeridian=!0,c.am=a.DATETIME_FORMATS.AMPMS[0],c.pm=a.DATETIME_FORMATS.AMPMS[1]):c.showMeridian=!1,c}angular.module("wfm.timerangepicker",[]).directive("timepickerWrap",["$locale",b]).directive("timeRangePicker",["$filter",a]);var d="directives/time-range-picker/time-range-picker.tpl.html"}(),function(){angular.module("wfm.workinghourspicker",["wfm.timerangepicker","pascalprecht.translate"])}(),function(){function a(a){return function(b){var c=moment.localeData(a.use()),d=c._weekdaysShort;return b.WeekDay>=d.length?"":d[b.WeekDay]}}angular.module("wfm.workinghourspicker").filter("showWeekdays",["$translate",a])}(),function(){angular.module("wfm.workinghourspicker").service("workingHoursService",["$locale",function(a){this.createEmptyWorkingPeriod=function(a,b){for(var c=[],d=moment.localeData()._week?moment.localeData()._week.dow:0,e=0;e<7;e++){var f=(d+e)%7;c.push({WeekDay:f,Checked:!1})}return{StartTime:a,EndTime:b,WeekDaySelections:c}}}]),angular.module("wfm.workinghourspicker").directive("workingHoursPicker",["$q","$translate","$filter","$locale","workingHoursService",function(a,b,c,d,e){function f(f,g,h){function i(a){var b=f.workingHours[a].WeekDaySelections.every(function(a){return a.Checked});b?angular.forEach(f.workingHours[a].WeekDaySelections,function(a){a.Checked=!1}):angular.forEach(f.workingHours[a].WeekDaySelections,function(b){b.Checked=!0,j(a,b.WeekDay)})}function j(a,b){m(f.workingHours,a,b)}function k(){var a=f.newWorkingPeriod.startTime,b=f.newWorkingPeriod.endTime;f.workingHours.push(e.createEmptyWorkingPeriod(angular.copy(a),angular.copy(b)))}function l(a){f.workingHours.splice(a,1)}function m(a,b,c){angular.forEach(a,function(a,d){d!==b&&angular.forEach(a.WeekDaySelections,function(a){c===a.WeekDay&&(a.Checked=!1)})})}function n(a,b){var e=moment(a),f=moment(b);return e.isSame(f,"day")?c("date")(a,d.DATETIME_FORMATS.shortTime)+" - "+c("date")(b,d.DATETIME_FORMATS.shortTime):c("date")(a,d.DATETIME_FORMATS.shortTime)+" - "+c("date")(b,d.DATETIME_FORMATS.shortTime)+" +1"}f.enforceRadioBehavior=j,f.addEmptyWorkingPeriod=k,f.removeWorkingPeriod=l,f.getTimerangeDisplay=n,f.toggleAllChecks=i,f.newWorkingPeriod={startTime:new Date(2016,0,1,8),endTime:new Date(2016,0,1,17)},f.disableNextDay=!0;var o,p=e.createEmptyWorkingPeriod().WeekDaySelections,q=[];for(o=0;o<p.length;o++)q.push(b(c("showWeekdays")(p[o])));a.all(q).then(function(a){for(o=0;o<p.length;o++)p[o].Text=a[o];f.weekDays=p})}return{restrict:"E",scope:{workingHours:"="},templateUrl:"directives/workinghourspicker/working-hours-picker.tpl.html",link:f}}])}();